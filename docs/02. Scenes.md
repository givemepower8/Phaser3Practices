# Scenes

Game happens on one or more scenes.

You can have switch scenes in the game or load multiple scenes and use camera to scroll.

The Scene Manager is a Game level system, responsible for creating, processing and updating all of the Scenes in a Game instance.

[SceneManager source code](https://github.com/photonstorm/phaser/blob/v3.16.2/src/scene/SceneManager.js)

SceneManage has an array of scenes. Each Scene has a unique key to identify it.

- [Scene Doc](https://photonstorm.github.io/phaser3-docs/Phaser.Scene.html)
- [Scene source code](https://github.com/photonstorm/phaser/blob/v3.16.2/src/scene/Scene.js)

## How to create a scene

Scene can be a JSON object.

The most important properties are:

- key
- preload()
- create()
- update()

```js
var loaderScene = {
  key: 'loaderScene',
  active: true,
  preload: loaderScenePreload,
  create: loaderSceneCreate
};

var firstScene = {
  key: 'firstScene',
  active: false,
  visible: false,
  preload: firstScenePreload,
  create: firstSceneCreate
};

var secondScene = {
  key: 'secondScene',
  active: false,
  visible: false,
  preload: secondScenePreload,
  create: secondSceneCreate
};

var gameConfig = {
  type: Phaser.AUTO,
  parent: 'phaser-example',
  width: 640,
  height: 338,
  scene: [loaderScene, firstScene, secondScene]
};
```

Another more proper scenes dev is to use the class scenes

```js
var Background = new Phaser.Class({
  Extends: Phaser.Scene,

  initialize: function Background() {
    Phaser.Scene.call(this, {
      key: 'background',
      active: true
    });
  },

  preload: function() {
    this.load.image('face', '/assets/pics/bw-face.png');
    this.load.image('arrow', '/assets/sprites/longarrow.png');
  },

  create: function() {
    this.face = this.add.image(400, 300, 'face');

    this.arrow = this.add.image(300, 300, 'arrow').setOrigin(0, 0.5);

    this.input.on(
      'pointerdown',
      function() {
        this.sys.game.destroy(true);

        document.addEventListener('mousedown', function newGame() {
          game = new Phaser.Game(config);

          document.removeEventListener('mousedown', newGame);
        });
      },
      this
    );
  },

  update: function(time, delta) {
    this.arrow.rotation += 0.01;
  }
});

var Demo = new Phaser.Class({
  Extends: Phaser.Scene,

  initialize: function Demo() {
    Phaser.Scene.call(this, {
      key: 'demo',
      active: true
    });
  },

  preload: function() {
    this.load.image('arrow', '/assets/sprites/longarrow.png');
  },

  create: function() {
    this.arrow = this.add.image(400, 300, 'arrow').setOrigin(0, 0.5);
  },

  update: function(time, delta) {
    this.arrow.rotation += 0.01;
  }
});

var config = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  backgroundColor: '#000000',
  parent: 'phaser-example',
  scene: [Background, Demo]
};

var game = new Phaser.Game(config);
```

ES6 way to create scenes.

```js
class SceneA extends Phaser.Scene {
  constructor() {
    super('SceneA');
  }

  preload() {}

  create() {}

  update() {}
}

class SceneB extends Phaser.Scene {
  constructor() {
    super({ key: 'SceneB', active: true });
  }

  create() {
    //  Grab a reference to the Game Scene
    let ourGame = this.scene.get('SceneA');
  }
}
```

## Scene instance

Each scene should specify a key. The key is used to locate the scene instance in the game.

In the game, you can get the instance by `this.scene.get('key')`

instanceScene.switch('anotherSceneKey') method can be used to switch to another scene.

In each scene, use `this.scene.launch('xxxScene')` or `start('xxxScene')` to switch scenes.

```js
let sceneB = this.scene.get('MySecondScene');

sceneB.switch('anotherScene');
```

### Phaser.Scene

Phaser.Scene has lots of useful static methods.

```js
Phaser.Scene.call('oneScene');
```

### dynamic scene

```js
for (var i = 1; i < 10; i++) {
  this.scene.add('demo_' + i, Demo, true);
}
```

### scene transition

transition() method can add effects to transition the scenes.
